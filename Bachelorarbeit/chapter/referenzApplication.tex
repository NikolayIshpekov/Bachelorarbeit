\chapter{Cross-Plattform-Entwicklung mit Xamarin am Beispiel einer Migration existierender App(iOS und Android)}In diesem Kapitel werden die Anforderungen und Funktionalitäten einer bereits für iOS und Androidexistierenden Applikation beschrieben.Diese Anwendung wird als Vorlage für eine Xamarin.Forms Applikation dienen, die im nächstenKapitel vorgestellt wird.\section{Beispiel-Anwendung (FensterbankApp)}Nüßing GmbH ist Vollsortimenter für Industrie und Handwerk in den Bereichen Beschlagsysteme,Bauelemente und Werkzeuge. Metall-Fensterbänke, die individuell auf Maß gefertigt und geliefertwerden sind ein wichtiger Produktbereich. Die Festerbänke müssen auf der Baustelle vom Handwerkerexakt ausgemessen werden und anhand dieser Messwerten, kann der Handwerker die passendenFensterbänke bei Nüßing bestellen. Der Mitarbeiter bei Nüßing gibt die Bestellung in das Systemein. So läuft eine klassische Auftragsannahme per Telefon mit interner, manuellerAuftragserfassung ab. Wie es sich erahnen lässt, ist dieser Bestellprozess fehlerträchtig undals Maßanfertigung kann eine falsche Fensterbank nicht einfach umgetauscht werden, sondern muss neugefertigt werden. Das führt zu zusätzlichen Kosten, die sich mit einer mobilen Anwendung leichtvermeiden lassen. \begin{figure}[!h]\centering\includegraphics[scale = 0.5]{graphics/NuessingReferenzApp_1.png}\caption{Nüßing-FensterbankApp Startseite}\label{fig:abb20}\end{figure}\begin{figure}[!h]\centering\includegraphics[scale = 0.13]{graphics/NuessingReferenzApp_2.png}\caption{Nüßing-FensterbankApp Fensterbank Eigenschaften}\label{fig:abb21}\end{figure}\\Die NüßingFensterbankApp (siehe Abb.\ref{fig:abb20}) ist die von der Firma Sunato GmbH entwickelten Lösung diesesProblems.Es ist eine Applikation (sowohl für Apple iOS als auch für die Android Plattform), mit der ein Kunde(Handwerker) ganz bequem eine Fensterbank bestellen kann, indem er die Maße, sowie gewünschteEigenschaften (Farbe, Antidröhn, Endstücke etc.) der Fensterbänke einfach in sein Smartphone oderTablet eingibt (siehe Abb.\ref{fig:abb21}).Beim Absenden einer Bestellung werden die Daten direkt in das Nüßing ERP übertragen und lösen dieBestellung und die Fertigung aus.\\Nüßing setzt MicrosoftsEnterprise Resource Planning (ERP) Lösung für den gehobenen Mittelstand, Dynamics AX, ein. DieERP-Software bietet vordefinierte Funktionen für die Branchen Fertigung, Großhandel/Distribution, Einzelhandel undDienstleistungen. Der Zugriff auf AX erfolgt mit dem Dynamics AX Workspace als Desktop Client odermit dem Enterprise Portal for Microsoft Dynamics AX per Browser. Weiterhin ermöglicht Dynamics AXden Zugriff über eine Reihe von programmierbaren Schnittstellen.\\Im ersten Schritt wurde in AX eineSchnittstelle definiert, um die Kommunikation mit den Smartphones und Tablets zuermöglichen.\\Die App ist mit einer lokalen Produktdatenbank ausgeliefert, die eineUnterstützung des Bestellprozesses und das Durchführen von Plausibilitätsprüfungenermöglicht.\\\cite{Sunato} \begin{figure}[!h]\centering\includegraphics[scale = 0.13]{graphics/NuessingReferenzApp_3.png}\caption{Nüßing-FensterbankApp Bestellungspositionen}\label{fig:abb22}\end{figure}\subsection{Technische Grundlagen für die Erstellung der FensterbankApp}\begin{itemize}  \item \textbf{Backendkommunikation}\\Die App kommuniziert mit den Backend-Services auf AX-Seite  über HTTP und JSON. Die Serviceadresse wird in der App fest konfiguriert und ist erst durch ein  App-Update änderbar.  \item \textbf{Sicherheit}\\Die App unterstützt in Produktion eine HTTPS-Kommunikation.  \item \textbf{Anmeldeprozess}\\Der Anmeldeprozess dient der eindeutigen Identifikation und  Freischaltung eines App-Benutzers. Als Anmeldedaten werden Kundennummer und PLZ von dem Benutzer  beim erstmaligen App-Start eingegeben. Mit der Kundennummer und PLZ ruft die App den  Anmeldeservice auf. Der Anmeldeservice prüft die Anmeldedaten und stößt einen Anmeldeprozess im  Backend an. Wenn die Anmeldung erfolgreich ist, bekommt die App eine gültige GUID. Diese wird als  Session-ID für die weitere Kommunikation mit dem Backend benutzt und in der App dauerhaft  gespeichert. Sollte die Anmeldung nicht erfolgreich sein (z.B. Kundennummer falsch), ist die GUID  auf "`String.Empty"' gesetzt. Auf diesem Weg weist die App den Benutzer hin, dass seine  Anmeldedaten nicht akzeptiert worden sind und er die Anmeldung wiederholen kann bzw. soll.\\Die  Anmeldung muss pro App-Installation einmalig erfolgreich durchgeführt werden, bevor die  Fensterbank-App für Fensterbankbestellungen benutzt werden kann.  \item \textbf{Bestellprozess}\\Pro Bestellungsversand kann nur eine Fensterbank zusammengefasst  werden.  Die Daten werden an den Bestellservice übermittelt. Der Service muss den erfolgreichen Eingang der  Bestellung bestätigen bzw. über einen Fehler Auskunft geben. Dafür muss der Service eine  Rückgabestruktur mit Rückgabecodes definieren. Gewünschtes Lieferdatum wird automatisch auf das  Tagesdatum gesetzt, eine Änderung kann durch den Benutzer vorgenommen werden. Name und eine  optionale Telefonnummer werden durch den Benutzer bei der Bestellung angegeben. Diese Daten werden  von der App gespeichert und bei den weiteren Bestellungen als Stammdaten mit den gespeicherten  Werden vorbelegt.\\Kommission kann bei der Bestellung angegeben werden. Der Wert wird nicht  gespeichert und muss bei jeder Bestellung neu angegeben werden.\end{itemize}