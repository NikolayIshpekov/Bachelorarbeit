\chapter{Cross-Plattform-Entwicklung mit Xamarin am Beispiel einer Migration undErweiterung existierender App} Im nachfolgenden Abschnitt werden die Anforderungen undFunktionalitäten einer bereits für iOS existierenden Applikation vorgestellt.Diese Anwendung wird als Vorlage für eine Xamarin.Forms Applikation dienen. Die wichtigstenEntwicklungsschritte dieser App werden im darauf folgenden Abschnitt beschrieben.\\\begin{figure}[!h]\centering\includegraphics[scale = 0.2]{graphics/ScannAppScreen_1.png}\caption{Nüßing-Scan-App}\label{fig:abb20}\end{figure}\section{Beispiel-Anwendung (Nüßing Scan-App)}Nüßing GmbH ist Vollsortimenter für Industrie und Handwerk in den Bereichen Beschlagsysteme,Bauelemente und Werkzeuge. Nüßing bietet seinen Kunden die Möglichkeit an, Artikel mithilfe einerApp zu bestellen.Dank dieser Nüßing Scan-App kann ein Handwerker, nach einer einmaligen Registrierung die gewünschtenProdukte bestellen. Der Kunde muss lediglich den Barcode des Artikels mit der Kamera desSmartphones einscannen. Anschließend wird der Barcode beim Server überprüft und falls der Artikelerkannt wurde, kann der Kunde die gewünschte Menge bestellen.Bei schlechten Lichtverhältnissen lässt sich die Blitzlicht-Lampe hinzuschalten und im Falle einesdefekten Barcodes, hat der Kunde auch die Möglichkeit es manuell einzugeben, indem der Kunde dieBarcodenummer in das dafür vorgesehene Feld einträgt. Nachdem der Kunde eine sechsstellige Zahleingetippt hat, wird automatisch eine Anfrage an den Server gesendet und falls ein Artikel gefundenwurde, erscheint eine Beschreibung des Artikels auf dem Bildschirm und der Kunde kann es bestellen(siehe Abb.\ref{fig:abb20}).% \begin{figure}[!h]% \centering% \includegraphics[scale = 0.13]{graphics/NuessingReferenzApp_2.png}% \caption{Nüßing-FensterbankApp Fensterbank Eigenschaften}% \label{fig:abb21}% \end{figure}% \\Die Nüßing% Scan-App (siehe Abb.\ref{fig:abb20}) ist die von der Firma Sunato GmbH entwickelten Lösung dieses% Problems.% Es ist eine Applikation (für die Apple iOS Plattform), mit der ein Kunde% (Handwerker) ganz bequem eine Fensterbank bestellen kann, indem er die Maße, sowie gewünschte% Eigenschaften (Farbe, Antidröhn, Endstücke etc.) der Fensterbänke einfach in sein Smartphone oder% Tablet eingibt (siehe Abb.\ref{fig:abb21}).% Beim Absenden einer Bestellung werden die Daten direkt in das Nüßing ERP übertragen und lösen die% Bestellung und die Fertigung aus.\\Nüßing setzt MicrosoftsEnterprise Resource Planning (ERP) Lösung für den gehobenen Mittelstand, Dynamics AX, ein. DieERP-Software bietet vordefinierte Funktionen für die Branchen Fertigung, Großhandel/Distribution, Einzelhandel undDienstleistungen. Der Zugriff auf AX erfolgt mit dem Dynamics AX Workspace als Desktop Client odermit dem Enterprise Portal for Microsoft Dynamics AX per Browser. Weiterhin ermöglicht Dynamics AXden Zugriff über eine Reihe von programmierbaren Schnittstellen.\\Die Kommunikation zwischen denSmartphones und dem AX-System erfolgt mittels Web Services mithilfe einer Schnittstelle, die in AXdefiniert wurde.\\Die App verfügt über eine lokale Datenbank, die für die Persistierung der Daten sorgt und denBestellprozess unterstützt.\\Abhängig von den Anmeldedaten lässt sich die Anwendung entweder im normalen Modus (als normalerNüßing Kunde) oder im Mitarbeiter Modus. Im Mitarbeiter Packet kann der Nüßing AngestellteBestellungen für verschiedene Kunden abgeben.\cite{Sunato} \\\begin{figure}[!h]\centering\includegraphics[scale = 0.5]{graphics/ScanAppBestellung.png}\caption{Nüßing-Scan-App Bestellungspositionen}\label{fig:abb22}\end{figure}\subsection{Technische Grundlagen für die Erstellung der Scan-App}Es gelten folgende technische Voraussetzungen für die ScanApp.\begin{itemize}  \item \textbf{Backendkommunikation}\\Die App kommuniziert mit den Backend-Services auf AX-Seite  über HTTP und JSON. Die Serviceadresse wird in der App fest  konfiguriert und ist erst durch ein App-Update änderbar.\\\cite{WebServicesScanApp}.  \item \textbf{Sicherheit}\\Die App unterstützt in Produktion eine HTTPS-Kommunikation. Das  ermöglicht einen relativ sicheren Betrieb der App in einer unsicheren Umgebung.  \item \textbf{Anmeldeprozess}\\Die Registrierung dient der eindeutigen Identifikation und  Freischaltung eines App-Benutzers. Als Anmeldedaten werden Kundennummer und PLZ von dem Benutzer  beim erstmaligen App-Start eingegeben. Die Daten werden beim Backend überprüft und wenn die  Registrierung erfolgreich ist, bekommt die App eine gültige GUID. Diese wird als  Session-ID für die weitere Kommunikation mit dem Backend benutzt und in der App dauerhaft  gespeichert. Sollte die Anmeldung nicht erfolgreich sein (z.B. Kundennummer falsch), ist die GUID  auf "`String.Empty"' gesetzt. Auf diesem Weg weist die App den Benutzer hin, dass seine  Anmeldedaten nicht akzeptiert worden sind und er die Anmeldung wiederholen kann bzw. soll.  \item \textbf{Bestellprozess}\\  Bei einem Klick auf den "`Bestellen"' Button werden die Auftragsdaten (Kundennummer,  Kundenname, Telefon, Lieferterminwunsch, Kommission, Bestellpositionen) an den Bestellservice übermittelt und der Server bestätigt den erfolgreichen Eingang oder gibt, gegebenfalls, Auskunft über einen  Fehler. Für diesen Zweck wurde eine Rückgabestruktur mit Rückgabecodes von dem Server  definiert.   Das Lieferdatum wird automatisch auf das Tagesdatum gesetzt. Sollte der Benutzer sich   ein anderes Lieferdatum wünschen, kann er den Liefertermin auf das von ihm ausgewählte Datum   setzen.   Diese Daten werden von der App gespeichert und bei den weiteren Bestellungen als Stammdaten mit   den gespeicherten Werten vorbelegt. Im Gegensatz dazu wird der Wert einer bei der Bestellung   angegebenen Kommission nicht gespeichert und muss bei jeder Bestellung neu angegeben werden.\end{itemize}\subsection{Erweiterung der Scan-App}Die ScanApp soll um folgende Funktionalitäten erweitert werden:\begin{itemize}  \item Die Bestelldaten sollen um ein Feld "`Email"' erweitert werden. Die Emailadresse soll  ebenso wie Name und Telefonnummer nach einmaligen Eintippen gespeichert bleiben und bei jeder  Bestellung mitgesendet werden. Auf diese Weise kann Nüßing eine Eingangsbestätigung an diese  Emailadresse schicken.  \item Wenn man im Mitarbeiterpaket eine Kundennummer eingibt, soll der Name des Kunden mit dieser  Kundennummer aus dem AX-System geholt und angezeigt werden. Ziel dieser Erweiterung ist es  zu  vermeiden, dass der falsche Kunde als Käufer eingetragen wird, im Falle eines Zahlendrehers.  \item Die Menüsteuerung soll geändert werden. Anstatt die bisherige vertikale tab-basierte  Navigation soll ein barrierefreies horizontales Dropdown Navigationsmenü (ähnlich wie das  sogenannte Hamburger-Menu) angewendet werden. Das würde eine Erweiterung der Navigationspunkte des Menüs erlauben. Bei dieser  Menüvariante ist das Menü versteckt und wird erst beim Tippen auf den Menü-Button (oder beim  Wischen von links nach rechts) aufgeklappt.  \item Außer Scannen, manuelle Eingabe, Warenkorb und Kontakseite, soll man noch die  Möglichkeit haben, zu drei weitere Seiten zu navigieren:  \begin{itemize}    		\item Favoriten    		\item Scan Historie - hier werden die gescannten Barcodes aufgelistet.    		\item Abgeschlossene Bestellungen  \end{itemize}  \item Änderung bei manuellen Eingabe: Es soll möglich sein eine beliebigstellige Barcodenummer  eintippen und überprüfen können (Zur Zeit ist es auf einen sechsstelligen Barcode eingeschränkt).   \item Änderung bei der Überprüfung eines Barocodes: Es gibt unterschiedliche Artikel, die  die gleiche Barcodenummer haben. In solchen Fällen sollen die Artikel aufgelistet werden, so dass  der Kunde den passenden Artikel auswählen kann.\end{itemize}