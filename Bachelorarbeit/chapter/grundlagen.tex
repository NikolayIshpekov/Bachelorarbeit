\chapter{Grundlagen der mobilen App Entwicklung}
Die App-Branche boomt (das muss umgeschrieben werden!!). Von der hochspezialisierten
Business-App bis hin zu Game-Apps. Kaum ein Unternehmen kommt daran vorbei, eine oder mehrere Apps
anzubieten. Apps sind heutzutage zu einer Selbstverständlichkeit geworden. Aber wie wird eine mobile
Anwendung erstellt? In diesem Kapitel werden die für das Verständnis notwendigen Grundlagen der App Entwicklung erläutert.
Die Themen werden stark komprimiert und vereinfacht vorgestellt.
\section{Aktuelle mobile Plattformen}
Mobile Betriebssysteme sind fest an ein bestimmtes Smartphone gebunden. Es ist nicht möglich
fehlende Funktionen durch einen Betriebssystemwechsel zu erlangen.
Die Kombination aus Smartphone und Betriebssystem kann als feste Einheit betrachtet werden.
In Kürze werden die aktuellsten mobilen Betriebssystemen vorgestellt.
\begin{itemize}
  \item \textbf{Android}\\Das von Google entwickelte, mobiles Betriebssystem Android wurde im
  November 2007 der Öffentlichkeit vorgestellt. Es besteht aus einem Betriebssystemkern, Middleware
  und eigenen Applikationen (Telefonbuch, Kalender etc.). Da wesentliche Teile der Android Plattform unter einer Open Source Lizenz (Apache v2.0) stehen, kann Android von
  Lizenznehmern ohne Zahlung von Lizenzgebühren lizenziert und wegen der quelloffenen Verfügbarkeit
  nach eigenen Bedürfnissen angepasst werden. Neben der Bereitstellung von Programmierschnittstellen
  bietet Android auch umfassende Quellcodesammlung für Entwickler an. Der ebenfalls quelloffene
  Betriebssystemkern von Android basiert auf Linux 2.6.
  Über "`Play Store"' (ein zentrales Softwareverzeichnis) lassen sich Applikationen kaufen und auf
  dem Gerät installieren. Google übernimmt für den Softwareentwickler die Distribution der Software und sorgt für eine kostenlose
  Verteilung von Updates. Das Inkasso erfolgt durch ein Zahlsystem von Google, wobei Google 30\% als
  Provision behält und dem Entwickler monatlich 70\% des
  Verkaufserlöses als Tantieme überweist. Die Registrierung für den Android Market kostet einmalig
  \$25.
  Software kann alternativ auch direkt auf ein Gerät mit Android installiert werden. Das
  Betriebssystem bringt Programme zum Senden und Empfangen von E-Mails, SMS, MMS, zum Aufnehmen und
  Abspielen von Fotos und Videos mit. Der Funktionsumfang beinhaltet auch ein Browser zum Surfen im
  Internet.
  \item \textbf{iOS}\\Das mobile Betriebssystem von Apple basiert auf der Grundlage des
  Betriebssystems Mac OS X und wurde zusammen mit dem iPhone im Juni 2007 eingeführt. Da Apple iOS
  nicht an andere Gerätehersteller lizenziert, ist die Installation von iOS nur auf Apple-Geräte
  möglich. Das iOS-SDK, welches zum Entwickeln von iOS-Applikationen dient, setzt Apple Rechner mit
  Intel-Prozessoren voraus und alte Macs mit PowerPC-CPUs können nicht zum Entwickeln verwendet
  werden.
  Im Laufe der Zeit wurde das Betriebssystem und der damit verbundene
  Funktionsumfang sukzessive dem technologischen Fortschritt angepasst und beinhaltet einen
  E-Mail-Client, ein Programm zur SMS-Verwaltung, eine Möglichkeit, kabellos zu drucken, einen
  Browser, ein Tool zur Sprachsteuerung sowie eine Multimediaanwendung, um Videos und Bilder sowohl
  selbst zu erstellen als auch abzuspielen. Applikationen lassen sich nur durch Download über ein
  zentrales Softwareverzeichnis von Apple ("`App Store"') auf einem Gerät installieren. Da Apple
  durch Signaturmechanismen die Installation von unsignierten Applikationen nicht zulässt, ist es nicht
  möglich unter Umgehung des App Stores Programme auf das Gerät zu installieren. Ähnlich wie bei
  Android übernimmt der App Store eine Marktplatz-, Distributions-, Wartungs- und Inkassofunktion.
  Eine auf dem Apple Gerät installiere Software überprüft in regelmäßigen Abständen, ob Updates für
  die gekaufte Apps vorhanden sind und der Benutzer wird dementsprechend benachrichtigt. Wie
  bei Android behält Apple eine Verkaufsprovision in Höhe von 30\%. Ein Vorteil von iOS
  gegenüber Android ist die nicht so große Vielfalt in Bezug auf Displaygröße. Diese durchgängige
  Standardisierung vereinfacht die Entwicklung, Wartung, Test und Weiterentwicklung von iOS Apps aus
  Sicht des Entwicklers. Zum Testen auf Endgeräten und für die Veröffentlichung von Apps im Apples
  App Store ist allerdings eine kostenpflichtige Mitgliedschaft im iOS Developer Program
  erforderlich. Die Geräte müssen im iPhone Developer Program unter DEVICES/ADD DEVICES hinzugefügt
  werden.
  \item \textbf{Windows Phone}\\Microsoft bietet mit Windows Phone ein Bündel aus Betriebssystem und
  einigen Zusatzprogrammen (Outlook, Word mobile etc.) für Smartphones. Windows Phone ist die
  Weiterentwicklung von Windows Mobile. Während Windows Mobile einseitig an Business-Kunden
  ausgerichtet war, hat Windows Phone Geschäfts- wie Consumer-Kunden im Auge. Im Gegensatz zu
  Microsoft Windows für stationäre Desktop-PCs, das nahezu ausschließlich auf Intel-x86-Prozessoren läuft, ist Windows Phone auf vielen unterschiedlichen Prozessorarchitekturen lauffähig. Mit Windows Phone bietet Microsoft ein Betriebssystem mit einer akzeptablen Systemleistung trotz der oft begrenzten
  Hardwareressourcen von mobilen und embedded Geräten. Seit dem Erscheinen des Betriebssystem
  Windows Phone setzt Microsoft ein Kachelkonzept. Neben Funktionalitäten wie SMS-Verwaltung,
  Telefonfunktion, Kalender und soziale Netzwerke, arbeitet Windows Phone nach dem Prinzip des
  Cloud-Computing. Bspw. Dienste wie Facebook werden integriert und mit den Funktionen des
  Betriebssystems verknüpft. Damit Apps auf einem Windows Phone Gerät installiert und getestet
  werden können, muss das Gerät explizit als Entwicklergerät freigeschaltet werden. Dazu muss man sich
  zuerst bei Microsoft als Entwickler registrieren, was 99 EUR im Jahr kostet. Das ist auch
  notwendig, wenn man Apps im Microsoft Market (vergleichbar mit App Store und Play Store)
  veröffentlichen möchte. \cite[17]{AppsPhoneGap}
  \item \textbf{Blackberry OS}\\Das Betriebssystem wird von Research In Motion (RIM)  für die
  Nutzung auf Smartphones des Typs Blackberry hergestellt. Ähnlich wie bei iOS von Apple ist es nur
  für Blackberry-Smartphones vorgesehen. Da Blackberry-Smartphones vorwiegend auf
  Geschäftskunden ausgerichtet und bieten sie komfortable Synchronisationsmechanismen für Daten
  zwischen einem Server und dem Smartphone, sowie einen Push-Email Dienst an. Damit sich native Applikationen störungsfrei
  auf einem Blackberry-Smartphone installieren und ausführen lassen, müssen diese zuvor von RIM
  digital signiert werden.
\end{itemize}
\cite[347]{MoApp1}
\cite[98]{App4U}
\\Laut International Data Corporation (IDC) ist Android das am weitesten verbreitete mobiles
Betriebssystem mit einem Marktanteil von 78\%, es folgen iOS mit 18.3\%, Windows Phone mit 2.7\% und
Blackberry OS mit 0.3\%. Allerdings hat Android ca 3\% Marktanteil verloren im Vergleich zum Vorjahr
und iOS hat dagegen 3\% mehr (\cite{SmOSMaQ1}).\\Da Android und iOS einen enormen Vorsprung auf die
anderen mobilen Betriebssystemen haben, was die Verbreitung angeht, wird sich diese Arbeit stark auf diese zwei
Betriebssystemen konzentrieren.
\section{Mobile Applikationen}
\begin{quote} 
"`Eine \textbf{mobile Applikation} stellt eine spezifische Anwendungssoftware dar, die zur
Anwendung auf einem Betriebssystem sowie zur Ausführung auf mobilen Endgeräten entwickelt wird
und neben der Berücksichtigung besonderer Endgeräteeigenschaften, die Nutzung kabelloser
Übertragungstechniken voraussetzt."'\footnotemark[1]
\end{quote}
\footnotetext[1]{\cite[105]{App4U}}
Der Begriff Applikation (App) hat sich in Bezug auf die mobile Nutzung und
Anwendung als eigenständiger Begriff etabliert. Eine App wird als nativ bezeichnet, wenn sie 
für eine bestimmte mobile Plattform entwickelt wurde und nur auf dieser Plattform installiert und
ausgeführt werden kann. Die Vorteile einer nativen App sind eine gute Performance und vor allen
Dingen die Möglichkeit zum Zugriff auf besondere Hardwarebestandteile der mobilen Endgeräte.
Ebenso können viele vorgefertigte Features aus nativen Schnittstellen und APIs benutzt werden. Da
die verschiedenen Verzeichnisdienste, wie App Store, Play Store oder Microsoft Market, native Apps
einfordern, kommt man um eine echte Anwendung nicht herum, wenn man einen kommerziellen Vertrieb
einer App anstrebt.\\Informationssuche und Nachrichtenübermittlung stand anfangs im Fokus des
mobilen Internets.
Allerdings hat sich im Laufe der Zeit ein Bedürfnis nach Interaktion und
Mitgestaltung entwickelt. Daraus resultiert die Nachfrage nach einfach zu bedienenden Geräten sowie
intuitiv steuerbare Applikationen. Immer mehr Unternehmen erkennen den daraus resultierenden
Mehrwert und ermöglichen den Zugriff auf Dienstleistungen über mobile Anwendungen. Es entstehen
Dienstleistungsangebote sowie im privaten als auch im geschäftlichen Bereich. Aus
produktorientierter Sichtweise lassen sich vier Klassen mobiler Anwendungen
identifizieren:\cite[102]{App4U}
\begin{itemize} 
  \item \textbf{Informationsorientierte} Dienste (z.B. Reiseinformationen, Börseninformationen
  etc.)
  \item \textbf{Applikationsorientierte} Dienste (z.B. Computerspiele, Übersetzungsdienste etc.)
  \item \textbf{Transaktionsorientierte} Dienste (z.B. Bezahldienste, Reservierungsdienste etc.)
  \item \textbf{Kommunikationsorientierte} Dienste (z.B. E-Mail, Chat oder soziale Netzwerke)
\end{itemize}
Mobile Applikationen werden in drei unterschiedliche Komplexitätsstufen eingeteilt:
 \begin{itemize}
   \item \textbf{Einfache Apps} zeichnen sich durch wenig Logik, keinen Backendzugriff,
   minimalistisches Design und die überwiegende Verwendung von Standardkomponenten aus.
   \item \textbf{Durchschnittliche Apps} verwenden ebenfalls kein eigenes Backend, können aber auf fremde Backends zugreifen. Bei
durchschnittlichen Apps sind vereinzelte Konfigurationsmöglichkeiten und mehrere Bildschirme
möglich.
   \item \textbf{Komplexe Apps}. Für die Entwicklung einer komplexen mobilen Anwendung ist eine Konzeption und Umsetzung
eines eignen Backends notwendig. Dazu kommt noch die Einbindung von Menüs und umfangreicheren
Konfigurationsmöglichkeiten und Anpassung der Layouts nach eigenen Wünschen. Auch
Funktionen und Komponenten zum Datenschutz und zur Dienstsicherheit sollten eingebaut werden.
\end{itemize}
Laut einer Studie der Marktforscher des "`HighText Verlags"', die im Jahr 2013 veröffentlicht
wurde, fallen die Honorare bei der Entwicklung mobiler Anwendungen in Deutschland an (Siehe Tabelle
\ref{table1}). Die Entwicklungskosten für iOS und Android haben sich im Laufe der Zeit stark
angenähert und für Nischenbetriebssysteme, wie z.B. das Betriebssystem Symbian von Nokia können die
Kosten bis zu 45\% höher anfallen. Grundsätzlich lassen sich zwei Berechnungsmodelle für die Preise
unterscheiden: der Pauschalpreis und der Preis pro Funktion, wobei ein Großteil der in Deutschland
entwickelten mobilen Anwendungen nach dem Preis pro Funktion kalkuliert wurde.
\begin{table}
\begin{tabular}{|l|l|l|l|l|}\hline
Komplexitätsstufe & Jahr & Minimum\footnotemark[2] & Durchschnitt\footnotemark[2] &
Maximum\footnotemark[2] \\
\hline Einfache Anwendung & 2011  & 760  & 16500 & 97000 \\
Einfache Anwendung & 2013  & 601  & 7754 & 78790 \\ \hline
Durchschnittliche Anwendung & 2011  & 2450  & 23000 & 105000 \\
Durchschnittliche Anwendung & 2013  & 809  & 13397 & 65933 \\ \hline
Komplexe Anwendung & 2011  & 6000  & 79000 & 520000 \\
Komplexe Anwendung & 2013  & 802  & 48804 & 382215 \\ \hline
\hline
\end{tabular}
\caption{Durchschnittspreise für App Entwicklung in Deutschland.\cite[31]{App4U}}
\label{table1}
\end{table}
(\cite[31]{App4U})
\footnotetext[2]{Alle Preise sind in Euro}

\section{Software Architekturmuster für mobilen Anwendungen}
Ohne Frameworks und Debugging Tools wäre die Programmierung einer Applikation kaum vorstellbar.
Bei Frameworks handelt es sich um ein Programmiergerüst zur Softwareentwicklung, das Entwicklern
vorgefertigte Designstrukturen und Codefragmente zur Verfügung stellt. Debugging Tools werden während des
Entwicklungsprozesses, zur Fehlerentdeckung und Verbesserung des Programmcodes,
eingesetzt. Durch die Verwendung von Frameworks können Softwareentwickler auf entsprechende
Standardbausteine zugreifen, sodass nicht bei jedem neuen Entwicklungsprojekt das Rad neu erfunden
werden muss.\\Das Entwickeln der Benutzeroberfläche (auf Englisch User Interface oder kurz UI) einer
professionellen Softwareanwendung ist nicht einfach. Es kann eine schwer durchschaubare Mischung aus
Daten, Interaktionsentwurf, visuellem Entwurf, Konnektivität, Multithreading, Sicherheit,
Internationalisierung, Überprüfung, Komponententests und etc. sein. In Anbetracht der Tatsache, dass
eine Benutzeroberfläche eng mit dem zugrunde liegenden System verbunden ist und die nicht immer
voraussagbaren stilistischen Ansprüche ihrer Benutzer entgegenkommen muss, kann dies der brisanteste Bereich vieler Anwendungen sein.
Hierfür können Architekturmuster Abhilfe schaffen.
\cite[195]{App4U}
\subsection{Model-View-Controller (MVC)}
\begin{figure}[!h]
\centering
\includegraphics[scale = 0.5]{graphics/ModelViewControllerDiagram.png}
\caption{Model-View-Controller-Konzept. Die durchgezogene Linie symbolisiert eine direkte
Assoziation, die gestrichelte eine indirekte Assoziation (z.B. über einen
Beobachter).(\cite{WikiMVCBild})}
\label{fig:abb8}
\end{figure}
Das \textbf{Model-View-Controller} (\textbf{MVC}) Muster (siehe Abb.\ref{fig:abb8}) gibt es schon
seit Jahrzehnten und wurde zusammen mit der Programmiersprache Smalltalk entwickelt. 
Man kann es sich vereinfacht folgendermaßen vorstellen:
\begin{itemize} 
  \item Die Daten, die auf dem Bildschirm angezeigt werden, sind das \textbf{Model}. Das Model
  enthält bis auf Such- und Sortierfunktionen keine Geschäftslogik. Diese Schicht kapselt die Daten
  der Anwendung in Klassen. Das Model besitzt also Klassen zur Speicherung und Verarbeitung von
  Daten und sorgt dafür, dass die Daten konsistent gehalten werden. 
  \item Die \textbf{View}-Komponente ist für die Darstellung auf dem Bildschirm und das
  Verarbeiten von Benutzereingaben zuständig. Das sind also Klassen, die sowohl etwas anzeigen, als
  auch Klassen, die Benutzer-Eingaben verarbeiten können. Die View-Schicht darf den Zustand der
  Anwendung nur lesen.
  \item Der \textbf{Controller} verknüpft Model und View. Er wertet die von der View
  entgegengenommenen Benutzereingaben aus und bekommt lesenden und schreibenden Zugriff auf das Model. Somit kann der
  Controller den Zustand der Anwendung verändern. 
\end{itemize} 
Die Controller-Schicht enthält also die Geschäftslogik der Anwendung und übernimmt die Steuerung des
Programms.
Weder das Model noch die View sollten die Klassen oder Methoden des Controllers kennen. Auf diese
Weise wird eine Wiederverwendbarkeit der Model- und View-Schichten erreicht. Jedes Model-Objekt kann
also durch unterschiedliche Controller verarbeitet und über verschiedene Views dargestellt werden
und jede View lässt sich in vollkommen unterschiedliche Applikationen einsetzen.\cite{AppsForiPhone}
\subsection{Model-View-ViewModel (MVVM)}
\begin{figure}[!h]
\centering
\includegraphics[scale = 0.7]{graphics/MVVMBild.png}
\caption{MVVM-Muster.(\cite{MSDNA2MVVM})}
\label{fig:abb9}
\end{figure}
Im Jahr 2005 stellte John Gossman, derzeit einer der Windows Presentation Foundation (WPF)- und
Silverlight-Architekten bei Microsoft, das \textbf{Model-View-ViewModel} (\textbf{MVVM})-Muster
(siehe Abb.\ref{fig:abb9}) in seinem Blog vor.
MVVM besteht aus drei Komponenten und ist MVC sehr ähnlich, der Unterschied ist, dass wir
hier anstatt Controller ein sogenanntes ViewModel haben und das Model im Gegensatz
zum Model von MVC nicht nur auf Such- und Sortierfunktionen begrenzt ist:
\begin{itemize} 
  \item \textbf{Model}. Das Model enthält die Geschäftslogik.
  \item \textbf{View}. Die View (Ansicht) repräsentiert die Benutzerschnittstelle. Die Ansicht wird
  in einer deklarativen Programmiersprache, wie bspw. XAML, erstellt. Es ist lediglich eine reine
  Beschreibung der Ansicht und enthält keine Ausführungslogik.
  \item \textbf{ViewModel}. Das ViewModel nimmt die Informationen vom Model und wandelt sie in eine
  von der View verwendbare Form um. Es nimmt außerdem die Änderungen aus der View und ruft die entsprechende
  Funktionalität im Model auf. Es handelt sich also um eine Vermittlungsschicht zwischen dem Model
  un der View. 
\end{itemize} 
Es ist ein sehr lose gekoppelter Entwurf und dadurch wird das Unit-Testing erleichtert.
Das Muster weist eine Abstraktion einer Ansicht auf, die den Zustand und das Verhalten einer
Ansicht enthält. Diese Abstraktion einer Ansicht wird als ViewModel bezeichnet.\\Ein ViewModel benötigt
keinen Verweis auf eine View.
Die View wird an die Eigenschaften eines ViewModels gebunden, das wiederum Daten verfügbar macht, die in Modellobjekten und anderen für diese Ansicht spezifischen
Zuständen enthalten sind. Das Erstellen der Bindungen zwischen Ansicht und ViewModel ist einfach, da
ein ViewModel-Objekt als DataContext einer Ansicht festgelegt wird. Wenn sich Eigenschaftswerte im
ViewModel ändern, werden diese neuen Werte automatisch über die Datenbindung an die Ansicht
weitergeleitet. Wenn der Benutzer auf eine Schaltfläche in der Ansicht klickt, wird im ViewModel ein
Befehl ausgeführt, um die angeforderte Aktion durchzuführen. Das ViewModel, aber niemals die
Ansicht, führt alle an den Modelldaten vorgenommenen Änderungen durch. Die View-Klassen wissen
nicht, dass die Modell-Klassen existieren, während dem ViewModel und dem Modell die Ansicht nicht
bekannt ist. Das Modell weiß nichts darüber, dass das ViewModel und die Ansicht existieren (siehe
Abb.\ref{fig:abb9}).
Durch das Binden von Eigenschaften einer View an ein ViewModel kommt es zur losen Kopplung zwischen den
beiden, wodurch in einem ViewModel kein Code geschrieben werden muss, der eine Ansicht direkt
aktualisiert.\\Ein besonderer Vorteil von MVVM ist die Möglichkeit, Komponententests an
ViewModel-Klassen durchzuführen.
\cite{MSDNAMVVM}
\section{Plattformspezifische Entwicklung (App Life-Cycle)}
Mit dem Begriff Software-Life-Cycle wird die Zeitspanne beschrieben, in der ein Softwareprodukt
geplant, entwickelt und bis zum Ende seiner Nutzung eingesetzt wird (siehe Abb. \ref{fig:abb5}).
Mobile Anwendungen werden als nativ bezeichnet wenn, die auf einem bestimmten Endgerätetyp und dessen zugehörigen Betriebssystem lauffähig sind. Die Entwicklung nativer Apps ist dann sinnvoll,
wenn die Applikation auf gegebene Hardware- und Softwareressourcen eines bestimmten Endgerätes
zugreifen soll, bspw. auf die interne Kamera, Bewegungssensoren oder GPS. Android, iOS und Windows
Phone sind inkompatibel zueinander, da diese Plattforme unterschiedliche API-Befehle benutzen.\\Im
Folgenden wird die App Entwicklung für die gängigsten mobilen Betriebssysteme vorgestellt. 
\begin{figure}[!h]
\centering
\includegraphics[scale = 0.5]{graphics/App_Lifecycle.png}
\caption{App Life-Cycle \cite[154]{App4U}}
\label{fig:abb5}
\end{figure}
\subsection{Android}
Android Apps werden mit der Programmiersprache Java programmiert. 
Als erstes muss man das
  Java Development Kit (JDK) installieren. Das JDK dient zum Kompilieren der
  Java-Textdateien in .class-Dateien. Man braucht noch das Android Software Development Kit (SDK).
  Im Gegensatz zu iOS Apps gibt es mehrere Entwicklungsumgebungen, mit denen man
Android Apps entwickeln kann. Die können auch auf allen Plattformen erstellt werden, auf denen
Java-Entwicklung möglich ist. Die Entwicklungsumgebung Eclipse hat sich als Standard für
Android-Entwicklung etabliert. Eclipse ist unter der Open-Source-Lizenz frei verfügbar und wurde
ursprünglich als integrierte Entwicklungsumgebung für die Programmiersprache Java genutzt. Seit der Version 3.0
ist die Einbindung von Plug-ins zur Erweiterung des Funktionsumfangs möglich und somit können
nahezu alle Programmiertechniken abgedeckt werden. Eclipse gibt es sowohl für Linux und Windows als
auch für Mac OS. Die Installation von Eclipse ist vollkommen unproblematisch, wenn auf einem Rechner
bereits ein JDK installiert ist. Eclipse wird als komprimierte Datei ausgeliefert, die einfach
extrahiert werden muss. Beim ersten Start such sich die IDE die passende Java-Umgebung und richtet
das System weitgehend automatisch ein.\\Um Android Apps mit Eclipse entwickeln zu können, muss das
Android-Developer-Tools Plug-in (ADT) eingebunden werden.
Im SDK-Manager können die verschiedenen Android-Versionen ausgewählt werden. Die API-Level von
Android sind abwärtskompatibel, deswegen muss der Entwickler die niedrigste unterstützte Version
auswählen. Zu empfehlen ist API-8 auszuwählen. Mit dem in dem ADT-Paket enthaltenen
Virtual-Device-Manager lassen sich virtuelle Android-Geräte erstellen. Diese lassen sich mit
verschiedenen Android-Versionen, Displayauflösungen, internem Speicherplatz, Arbeitsspeicher und
vielem mehr konfigurieren. Auf diese Weise kann man das Testen der Anwendung auf verschiedenen
Geräten simulieren. Allerdings empfiehlt es sich, die Anwendung auf möglichst vielen echten Geräten
zu testen.\\Um ein Smartphone oder Tablet mit Eclipse zu verbinden, müssen zunächst die
Entwickleroptionen des Geräts aktiviert werden und anschließend es per
USB an den PC anschließen.\\Mit dem Android NDK (Nativ Development Kit) bietet Android die
Möglichkeit an, Teile der Applikation in nativen Programmiersprachen zu implementieren.
Die meisten Apps brauchen NDK nicht, aber für manche ist es hilfreich, C oder C++ Bibliotheken verwenden zu können.
\\Der Android-SDK kompiliert den Java-Code und packt das Programm und alle anderen zugehörigen Ressourcen, wie
Layoutdateien und Grafiken, in eine .apk-Datei.
\\\textbf{Dalvik} ist eine virtuelle Maschine, die JVM (Java Virtual Machine) ähnlich ist, aber
speziell an die Einschränkung mobiler Geräte angepasst wurde. Der Java-Bytecode wird mit dem
Dalvik-Compiler zu Dalvik-Bytecode kompiliert und anschließend von der Dalvik-VM ausgeführt. Auf
diese Weise wird abgesichert, dass selbst wenn an der Sprache Java Änderungen vorgenommen werden,
der Java-Bytecode gleich bleibt (siehe Abb.\ref{fig:abb6}). Alle Kompilationsschritte werden von den
Entwicklungswerkzeugen automatisiert, so dass keine zusätzlichen Arbeitsschritte für den Entwickler
anfallen. Jede Anwendung in Android wird in einer eigenen virtuellen Maschine, der sogenannten
Sandbox, ausgeführt. Jede Anwendung ist somit isoliert von den anderen Apps und kann nur auf ihre
eigene Daten zugreifen. So wird unter anderem bei einem Absturz die Stabilität des Systems
gewährleistet.
Die Entwicklung von Applikationen für Android erfolgt nach dem Model-View-Controller Architekturmuster. Im Folgenden werden die wichtigsten Komponenten einer Android Applikation vorgestellt.
\cite[317]{App4U}
\begin{figure}[!h]
\centering
\includegraphics[scale = 0.5]{graphics/JVMvsDavlik.png}
\caption{Vergleich JVM und Dalvik-VM. \cite[318]{App4U}}
\label{fig:abb6}
\end{figure}
\subsubsection{AndroidManifest.xml}
Die wichtigste Datei in jeder Android Anwendung ist die Konfigurationsdatei, genannt
AndroidManifest.xml. In der Datei werden globale Beschreibungen festgelegt, die für die App gelten.
\begin{itemize}
  \item Version der App.
  \item Die minimale Android Version (android:minSdkVersion), die benötigt wird um die App
  auszuführen.
  \item Die Android Version für welche die App erstellt
wurde (android:targetSdkVerion).
  \item Mit dem uses-permission Tag definiert man die Funktionen, welche
die App vom System eine Erlaubnis benötigt (z.B. Autorisierung, eine Verbindung mit dem Internet
herzustellen).
  \item In der Konfigurationsdatei wird noch die Start Activity definiert
\end{itemize}
\subsubsection{Ressources}
Alle Ressourcen einer App liegen im dafür vorgesehenen 'res' Ordner. In diesem Ordner befinden sich
folgende Unterordner:
\begin{itemize}
  \item \textbf{/res/values}\\In diesem Ordner werden alle einfache Werten abgelegt. Für
  Übersetzungen gibt es hier Datei pro Sprache
  \item \textbf{/res/layout}\\Hier liegen alle definierten Layouts als XML Dateien. Möglicherweise
  benötigt man für unterschiedliche Display Auflösungen unterschiedliche Layoute.
  \item \textbf{/res/menu}\\Hier werden Eigenschaften von Menüeinträgen definiert.
  \item \textbf{/res/drawable}\\Alle App Icons befinden sich in diesem Ordner, der wiederum in
  verschiedenen Unterordner für die unterschiedlichen Auflösungen gegliedert wird.
\end{itemize}
\cite{AndroidTutorialBlog}
\subsubsection{Activities}
Activities sind Komponenten einer Android Applikation, die die Interaktion mit dem Benutzer
(Bild aufnehmen, Email senden, SMS schicken etc.) ermöglichen. D.h. eine Activity stellt ein Fenster
dar, welches vom Benutzer Eingaben erwartet. Jede Activity besitzt eine eigene Benutzeroberfläche
und kann andere Activities starten.
Ein Programm besteht normalerweise aus mehreren Activities, welche für verschiedene Aufgaben vorgesehen sind. In Abb.\ref{fig:abb7}
sieht man den Lebenszyklus einer Activity.\\Eine Activity erstellt man indem man eine Klasse
definiert, welche von Activity erbt. Jede Activity hat folgende Methoden:
\begin{itemize}
  \item \textbf{onCreate()} Ist für das Erstellen einer Activity und für das Zeichnen der
  Benutzeroberfläche zuständig. In der onCreate() Methode wird die setContentView Funktion aufgerufen,
  durch die der Activity entweder eine View, oder direkt ein Layout über die Ressourcen ID
  zugewiesen wird.
  \item \textbf{onStart()} Diese Methode wird beim ersten Start und auch jedes mal aufgerufen, wenn
  der Benutzer wieder zurückkehrt nachdem eine andere Activity ausgeführt wurde. Beim Aufruf von onStart() wird
  die Activity sichtbar.
  \item \textbf{onResume()} Wird aufgerufen, wenn der Benutzer wieder in die Activity zurückkehrt
  nachdem die Methode onPause() aufgerufen wurde. D.h. die Methode wird immer aufgerufen, wenn die
  Activity den Focus zurückbekommt.
  \item \textbf{onPause()} Wird aufgerufen, wenn eine andere Activity im Vordergrund gerät, also
  die Activity verliert den Focus.
  Das passiert, wenn z.B. der Benutzer zurück ins Menü geht.
  \item \textbf{onStop()} Sobald die Activity nicht mehr sichtbar ist, wird onStop() aufgerufen.
  \item \textbf{onDestroy()} Bevor die Activity beendet wird, wird onDestroy() aufgerufen. Es wird
  auch dann aufgerufen, wenn die Orientierung geändert wird, also von Portrait auf Landscape
  gewechselt wird.
\end{itemize}
\begin{figure}[!h]
\centering
\includegraphics[scale = 0.5]{graphics/lifecycle-activity-android.png}
\caption{Activity Life-Cycle.(\cite{ActivityLifeCycle})}
\label{fig:abb7}
\end{figure}
\subsubsection{Services}
Service ist eine Applikation Komponente, die Operationen im Hintergrund durchführt und keine
Interaktion mit dem Benutzer benötigt. Ein Service wird von einer anderen Komponente, wie einer
Activity, gestartet und läuft auch weiter, wenn die Activity nicht mehr im Vordergrund ist.
\cite[320]{App4U}
\subsubsection{Intents}
Activities und Services werden durch Nachrichten aufgerufen, die eine andere Komponente an sie
sendet. Eine solche Nachricht wird Intent genannt. In einem Intentobjekt werden verschiedene Daten
gespeichert. Jede Intentnachricht hat einen Kontext und ein Ziel. Als Kontext ist die erste
Activity, also die Activity, die die Intentnachricht sendet und als Ziel die Activity, an die die
Nachricht gesendet wurde. Je nach Bedarf können noch Daten, welche der neuen Activity übermittelt
werden, in den Intent gespeichert werden, bevor die neue Activity gestartet wird.\cite[321]{App4U}
\subsubsection{Komponenten der Benutzeroberfläche}
Die Benutzeroberfläche oder User Interface (UI) in Android Apps besteht aus Views und View Groups.
Views sind Bausteine, wie Textview oder Imageview. View Groups sind Container, die Views oder andere View
Groups enthalten. Um eine bessere Trennung zwischen Design und Java-Code zu erreichen wird das UI in
XML-Dateien definiert. Der verwendete Text der App sollte auch nach Möglichkeit in einer XML-Datei
statt in Java-Code untergebracht werden. Das erleichtert nicht nur das spätere Ändern des Textes,
sondern auch die Mehrsprachigkeit einer App. Für bessere Übersicht empfiehlt es sich, für jede
Activity eine XML-Datei mit dem Namen der Activity zu erstellen, welche dann das Layout der Activity
enthält.
\subsubsection{Content Provider}
Mechanismus für die Persistierung von Daten. Meistens in der Form von SQLite Datenbank auf dem
Endgerät oder in der Cloud.
\subsection{iOS}
Um iOS Apps entwickeln zu können, braucht man Apples kostenlose Entwicklungsumgebung Xcode, welche
ausschließlich für Apple Rechner zur Verfügung steht. Xcode bringt das aktuelle iOS Software
Development Kit (SDK) mit. In dem iOS SDK sind hochwertige Emulatoren für die aktuelle Version
 enthalten und bei Bedarf lassen sich auch ältere Versionen herunterladen. Apps für iOS werden in
 Objective-C und seit kurzem auch mit der von Apple neu eingeführten Programmiersprache Swift
 entwickelt. Die \textbf{LLVM} Compiler Infrastruktur ist ein Open Source Projekt und die technische
 Grundlage für die native Entwicklung auf iOS (\cite{LLVM}). Der in Xcode integrierte
 Interface-Builder unterstützt das Drag-and-drop-Verfahren und macht die Gestaltung der
 Benutzeroberfläche zu einer relativ einfachen Aufgabe.
 Die Eingabe des Quellcodes erfolgt in einem Texteditor. Eine Anwendung läuft auf dem im Xcode
 enthaltenen iOS-Simulator in der gleichen Wiese ab, als wenn ein tatsächliches iOS-Gerät die Basis wäre.
 \\Ähnlich wie bei Android wird das MVC-Entwurfsmuster für die Entwicklung von iOS Apps verwendet.
 Für Entwicklung mobiler Applikationen ist das Cocoa-Framework erforderlich, das vielfältige häufig
 genutzte Bibliotheken (bspw. zum Zugriff auf Hardwaregeräte) bereitgestellt. Apple stellt mit
 Cocoa-Touch-Framework eine modifizierte und auf die Anforderungen leistungsschwächerer mobilen
 Endgeräte abgestimmte Version des Frameworks zur Verfügung. Analog zu Android werden Apps in einer beschränkenden Sandbox ausgeführt und es
ist keine direkte Interprozesskommunikation möglich. Jede App kann nur in einem eigenen Ordner auf
das Dateisystem zugreifen und hat üblicherweise nur geringe Rechte. Der Benutzer muss
die Rechte aktiv bestätigen. Im Folgenden werden die wichtigsten Komponenten der iOS App Entwicklung
vorgestellt.
\\Um für die View-Komponenten ein Verhalten zu definieren, stehen drei Mechanismen zur Verfügung:
\begin{itemize}
  \item Delegation. Ermöglicht eine entkoppelte Kommunikation. 
  \item Target Action. Über den Target-Action-Mechanismus benachrichtigt die View den Controller,
  wenn bspw. ein Button geklickt wurde.
  \item Notification. Die Kommunikation vom Model an den Controller erfolgt über Notifications und
  Key-Value-Observing.
\end{itemize}
\subsubsection{iOS App Lifecycle}
Beim Starten einer iOS App passiert Folgendes:
\begin{enumerate} 
  \item Zuerst wird die main()-Methode in der Klasse main.m ausgeführt.
  \item Dann wird die didFinishLaunchingWithOptions()-Methode der Klasse AppDelegate.m ausgeführt.
  \item Die Storyboards werden geladen.
  \item Am Ende werden die Methoden viewDidLoad() und viewWillAppear() des ViewControllers, der als
  Start-ViewController festgelegt wurde ausgeführt.
\end{enumerate}
\subsubsection{Storyboard}
In dieser Datei lassen sich gleich mehrere Ansichten erstellen und deren Übergänge (Storyboard
Segues) definieren. Das Storyboard repräsentiert die View des MVC-Architekturmusters. Die
iOS Benutzerschnittstelle (UI) wird mit einem Interface Builder (UI Builder) gestaltet. Mithilfe
dieses Werkzeugs lassen sich einzelne Komponenten der UI per Drag \& Drop zusammenstellen und mit
einem ViewController verbinden.
Im Ui Builder werden Oberflächen nicht nur gezeichnet, sondern auch deren Eigenschaften
definiert. Durch Constraints lassen sich die Positionen der Objekte relativ zueinander beschreiben
und dadurch kann man flexibel mit verschiedenen Auflösungen und Darstellungsmodi
(Landscape/Portrait) umgehen.
\begin{figure}[!h]
\centering
\includegraphics[scale = 0.5]{graphics/storyboard.png}
\caption{Storyboard. (\cite{DevApple})}
\label{fig:abb12}
\end{figure}
\subsubsection{ViewController}
Die ViewController sind wichtige Bausteine für alle iOS-Apps.
Xcode legt bei View-basierten Projekten immer automatisch einen ViewController an, der die
Funktionalität des oder eines Controllers innerhalb der App abbildet. 
Die Verwaltung einer Ansicht erfolgt über einen ViewController. Ein ViewController beinhaltet die
Geschäftslogik einer Anwendung und steuert den Programmablauf (siehe Abb.\ref{fig:abb10}).
Es empfiehlt sich, für jeden Dialog einen eigenen ViewController zu nehmen.
ViewController, die im Storyboard definiert wurden, werden
automatisch instanziiert. In Abb.\ref{fig:abb11}
sieht man die Einzelschritte beim Laden einer View.
\begin{figure}[!h]
\centering
\includegraphics[scale = 0.3]{graphics/ViewController.png}
\caption{Funktionsweise eines ViewControllers. (\cite{DevApple})}
\label{fig:abb10}
\end{figure}
\begin{figure}[!h]
\centering
\includegraphics[scale = 0.2]{graphics/loading_a_view_into_memory_2x.png}
\caption{Laden einer View. (\cite{DevApple})}
\label{fig:abb11}
\end{figure}
\subsubsection{Navigation Controller}
Ein Navigation Controller kapselt die Navigation zwischen ViewControllern. Die ViewController werden
auf einem sogenannten Navigation Stack gestapelt.
\subsubsection{Property Lists ("`Plists"')}
Property Lists sind ein in iOS Apps häufig verwendetes Werkzeug um Einstellungen und Zustände zu
speichern oder auch mit einer App auszuliefern. Plists stellen eine Hierarchie von strukturierten
Daten dar und werden als XML serialisiert. Xcode bietet einen Editor, mit dem man mittels einer
Benutzeroberfläche Property Lists bearbeiten kann, ohne sich mit XML Code auseinander setzen zu
müssen. Die Einstellungen eines Projektes werden in einem speziellen File, das \textbf{Info.plist}
gespeichert. Es wird von Xcode generiert und wird beim Start einer App automatisch eingelesen und
ausgewertet.
\subsection{Windows Phone}
Microsoft veröffentlichte im Juli 2000 im Rahmen einer umfangreicher Werbekampagne die
sogenannte .NET Plattform. Sie besteht aus den folgenden Komponenten:
\begin{itemize}
  \item Eine Sammlung von Programmiersprachen, wie C\#, Visual C++ .NET, Visual Basic .NET, Visual
  J\# .NET und JScript .NET, sowie die graphische Entwicklungsumgebung Visual Studio.NET. 
  \item Das .NET Framework stellt eine Bibliothek dar, die vorgefertigte Klassen für die Entwicklung
  von Web Services, Internet- und Windows-Anwendungen beinhaltet.
  \item .NET Compact Framework ist eine im Funktionsumfang, sowie in den Hardwareanforderungen
  reduzierte Version des .NET Frameworks und ist speziell für Geräte bestimmt, die mit dem mobilen
  Betriebssystem Windows Phone (früher Windows CE .NET oder Windows Mobile) arbeiten.
\end{itemize} 
Um Apps für Windows Phone entwickeln und auf Geräten deployen zu können, wird eine MSDN Subscription
für Entwickler benötigt. In dieser Subscription sind die Zugangsrechte für Windows Phone Store und
Windows Store bereits für die erste Jahreslaufzeit des Abonnements enthalten. Schüler und
Studierende, die am Microsoft DreamSpark-Programm teilnehmen, sowie Unternehmen, die für das
Microsoft BizSpark-Programm qualifiziert sind, erhalten den Entwickler Account kostenlos. Mit
diesem, sonst kostenpflichtigen Entwicklerkonto hat man nicht nur die Möglichkeit, Apps in den
Windows Phone Store einzureichen und zu überwachen, sondern auch die Apps auf einem persönlichen
Gerät zu debuggen. Man darf bis zu 10 Apps gleichzeitig installieren, die noch nicht in den Windows
Phone Store eingestellt sind.\\Die .NET Plattform ist, ähnlich wie Java, plattformunabhängig.
Mit einer Common Language Specification (CLS) wird genau definiert, wie sich fremde Compiler für verschiedene Programmiersprachen bei der
Erzeugung eines speziellen Zwischencodes (MSIL, vergleichbar mit Bytecode von Java) zu verhalten
haben. Der erzeugte MSIL-Code kann auf jedem System ausgeführt werden, auf dem eine
.NET-Laufzeitumgebung (CLR-System) installiert ist. Außer Micorsofts .NET Framework, die
nur für Windows angeboten wird, existiert noch das Open Source Projekt "`Mono"', das bspw. auf den
Betriebssystemen Mac OS und Linux lauffähig ist.
\\Ähnlich wie bei iOS von Apple lassen sich Windows Phone Apps ausschließlich unter der Verwendung
der Entwicklungsumgebung Visual Studio von Microsoft erstellen. Für die Installation von Visual Studio wird das Betriebssystem Windows von Microsoft vorausgesetzt. Wie Xcode und Eclipse stellt Visual
Studio eine integrierte Entwicklungsumgebung zur Verfügung. Im Gegensatz zu den
Entwicklungsumgebungen von iOS und Android ist Visual Studio bis auf die funktional beschränkten
Express-Versionen kostenpflichtig. Es wird das kostenlose Windows Phone SDK vorausgesetzt. Nach der
Installation des SDKs, integrieren sich die Tools für die Windows Phone-Entwicklung nahtlos in die
bestehende Entwicklungsumgebung Visual Studio. 
Visual Studio bietet Entwurfansicht zur Darstellung der Benutzeroberfläche und Texteditor für die
Eingabe des Quellcodes an.

Für die Erstellung einer nativen Windows Phone App kann man C\#, Visual
Basic und XAML oder C++ und DirectX verwenden. Man kann auch in Internet Explorer ablaufende Windows Phone-Apps mit HTML5, JavaScript und CSS entwickeln.
Mithilfe des MVVM-Architekturmusters wird eine Separation der
verschiedenen Komponenten erreicht.
\\Die wichtigsten Komponenten einer Windows Phone App sind:
\begin{itemize} 
  \item AssemblyInfo (.vb oder .cs)\\Die Datei enthält Metadaten wie die Namen und die Version, die
  anschließend in die fertige App generiert werden. Diese Datei gibt es nur für C\# oder Visual
  Basic .NET Projekte.
  \item Package.appxmanifest\\Hier werden ebenfalls Informationen wie Name, Beschreibung, Logos und
  benötigte Systemfunktionen beschrieben (Metadaten). Die Windows Runtime kann somit die wichtigsten
  Informationen zur Windows-Store-App entnehmen.
  \item Assets\\Dieses Verzeichnis enthält ein Standard Logo, Splashscreen und ein Convericon. Diese
  können durch eigene Dateien mit dem gleichen Namen ersetzt werden.
\end{itemize}
Für die Gestaltung der Benutzeroberfläche bietet Visual Studio einen Designer an. Es wird ein
Werkzeugkasten zur Verfügung gestellt und man kann per Drag \& Drop verschiedene Elemente auf der
App Oberfläche platzieren. Der Entwickler kann im Designer nur die Oberflächenlogik, aber keine
Verarbeitungslogik der eigentlichen Aufgabe. Es entsteht einen XAML-Code \footnotemark[1]. Diese
Trennung verschafft nicht nur eine saubere Aufteilung, sondern auch eine bessere Wartbarkeit und
Wiederverwendbarkeit der einzelnen Komponenten. Zu jeder XAML-Datei (Datei.xaml) gibt es es eine
C\#-Datei, die genau so heißt (Datei.xaml.cs).
Beim Deklarieren eines Oberflächeelements im XAML lässt sich eine neue Methode in der Code-Behind-
Datei erzeugen. In dieser Methode ist dann die Verarbeitungslogik enthalten.
\footnotetext[1]{XAML (Extensible Application Markup Language) ist eine Dialektform von XML.}  
\cite{MSDNApps}
\cite[125]{App4U}
\cite[382]{MoApp1}
\subsection{Fazit}
Wie aus diesem Kapitel ersichtlich wurde, unterscheiden sich die nativen
Entwicklungsansätze grundsätzlich in den Programmiersprachen und den plattformspezifischen
APIs. Was alle Entwicklungsansätze gemeinsam haben, sind die angewendeten Architekturmuster - das
MVC oder das ähnliche MVVM.\\Da Apps ähnliches Grundgerüst haben, wäre es möglich, mittels eines
Frameworks eine gemeinsame Codebasis in plattformspezifische Programmiersprachen zu übersetzen. 

